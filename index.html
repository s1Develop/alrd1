<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ALRD1</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body>

  <!-- NAV -->
  <header class="nav">
    <div class="nav-inner">
      <div class="logo">
        <a href="https://www.instagram.com/alrd1_" target="_blank" class="insta-icon">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="#hero">ALRD1</a>
      </div>
      
      
      <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <nav class="menu">
        <a href="#hero">Home</a>
        <a href="#about">About Me</a>
        <a href="#quotes">Quotes</a>
        <div class="nav-dropdown">
          <a href="#contact" class="dropdown-trigger">Contact</a>
          <div class="dropdown-menu">
            <a href="https://www.instagram.com/alrd1_?igsh=MTU4aXpvMXV3bXBoeg==" target="_blank">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://tiktok.com/@alrd1__" target="_blank">
              <i class="fab fa-tiktok"></i>
            </a>
            <a href="mailto:alrd1team@gmail.com">
              <i class="fas fa-envelope"></i>
            </a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section id="hero" class="section hero">
    <video
      class="bg-video auto-video"
      playsinline webkit-playsinline autoplay muted loop
      preload="metadata"
      poster="./assets/posters/hero.jpg"
      data-mp4="./assets/videos/background.mp4"
      data-webm="./assets/videos/background.webm"
    >
      <source src="./assets/videos/background.webm" type="video/webm"/>
      <source src="./assets/videos/background.mp4"  type="video/mp4"/>
    </video>
    <noscript>
      <img src="./assets/posters/hero.jpg" alt="ALRD1" style="width:100%;height:auto;">
    </noscript>
    <div class="overlay">
      <h1>Welcome to ALRD1</h1>
      <!-- <p>You Already Won. The Beat Starts Here 🎧</p> -->
      <a href="#quotes" class="btn">Get A Quote Now</a>
    </div>
  </section>

  <!-- 3개 영상 섹션 -->
  <section class="video-sections">
    <!-- Video Section 1 -->
    <div class="video-section">
      <video
        class="bg-video auto-video"
        playsinline webkit-playsinline autoplay muted loop
        preload="metadata"
        poster="./assets/posters/aboutme1.jpg"
        data-mp4="./assets/videos/aboutme1.mp4"
        data-webm="./assets/videos/aboutme1.webm"
      >
        <source src="./assets/videos/aboutme1.webm" type="video/webm"/>
        <source src="./assets/videos/aboutme1.mp4"  type="video/mp4"/>
      </video>
      <div class="video-overlay">
        <div class="container">
          <h2>ALRD1</h2>
          <p>Vancouver's Premier DJ Experience</p>
        </div>
      </div>
    </div>

    <!-- Video Section 2 -->
    <div class="video-section">
      <video
        class="bg-video auto-video"
        playsinline webkit-playsinline autoplay muted loop
        preload="metadata"
        poster="./assets/posters/aboutme2.jpg"
        data-mp4="./assets/videos/aboutme2.mp4"
        data-webm="./assets/videos/aboutme2.webm"
      >
        <source src="./assets/videos/aboutme2.webm" type="video/webm"/>
        <source src="./assets/videos/aboutme2.mp4"  type="video/mp4"/>
      </video>
      <div class="video-overlay">
        <div class="container">
          <h2>Wedding & Events</h2>
          <p>Creating Unforgettable Moments</p>
        </div>
      </div>
    </div>

    <!-- Video Section 3 -->
    <div class="video-section">
      <video
        class="bg-video auto-video"
        playsinline webkit-playsinline autoplay muted loop
        preload="metadata"
        poster="./assets/posters/aboutme3.jpg"
        data-mp4="./assets/videos/aboutme3.mp4"
        data-webm="./assets/videos/aboutme3.webm"
      >
        <source src="./assets/videos/aboutme3.webm" type="video/webm"/>
        <source src="./assets/videos/aboutme3.mp4"  type="video/mp4"/>
      </video>
      <div class="video-overlay">
        <div class="container">
          <h2>You Already Won</h2>
          <p>The Beat Starts Here 🎧</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="section section-content about-hero" 
    style="background: url('./assets/images/rev1.jpg') center center / cover no-repeat;">
      <div class="overlay">
      <div class="container">
      <h2>About Me</h2>
      <p>Wedding & Event DJ based in Vancouver. House, Hip-Hop, and everything in between — crafted for your moment.</p>
      <a href="moreabout.html" class="btn">More About Me</a>
      </div>
      </div>
</section>

  <!-- QUOTES -->
  <section id="quotes" class="section section-content">
    <div class="container">
      <h2>Get A Quote</h2>
      <p>Please complete the form below.</p>

      <form class="quote-form" action="https://formsubmit.co/alrd1team@gmail.com" method="POST">
        <input type="hidden" name="_subject" value="New Quote Request from ALRD1" />
        <input type="hidden" name="_captcha" value="false" />

        <!-- 기본 정보 -->
        <input type="text"   name="name"        placeholder="Name" required />
        <input type="email"  name="email"       placeholder="Email" required />
        <input type="tel"    name="phone"       placeholder="Phone Number" required />
        <input type="text"   name="location"    placeholder="Location of Event" required />
        <input type="text"   name="postal_code" placeholder="Postal Code" required />
        <input type="date"   name="date"        placeholder="Date of Event" required />

        <!-- 이벤트 시간 -->
        <label class="field-label">Event Time</label>
        <div class="time-row">
          <span>Start:</span>
          <select name="start_hour" required>
            <option value="">HH</option>
            <option>1</option><option>2</option><option>3</option>
            <option>4</option><option>5</option><option>6</option><option>7</option>
            <option>8</option><option>9</option><option>10</option><option>11</option>
            <option>12</option>
          </select>
          <select name="start_minute" required>
            <option value="">MM</option>
            <option>00</option><option>15</option><option>30</option><option>45</option>
          </select>
          <select name="start_ampm" required>
            <option value="">AM/PM</option>
            <option>AM</option><option>PM</option>
          </select>
        </div>

        <div class="time-row">
          <span>End:</span>
          <select name="end_hour" required>
            <option value="">HH</option>
            <option>1</option><option>2</option><option>3</option>
            <option>4</option><option>5</option><option>6</option><option>7</option>
            <option>8</option><option>9</option><option>10</option><option>11</option>
            <option>12</option>
          </select>
          <select name="end_minute" required>
            <option value="">MM</option>
            <option>00</option><option>15</option><option>30</option><option>45</option>
          </select>
          <select name="end_ampm" required>
            <option value="">AM/PM</option>
            <option>AM</option><option>PM</option>
          </select>
        </div>

        <!-- 규모/타입 -->
        <input type="text" name="guests" placeholder="Approx. Guest Count / Event Size" required />

        <label class="field-label">Event Type</label>
        <select id="eventType" name="event_type" required>
          <option value="">Select</option>
          <option>Wedding</option>
          <option>Pop-up</option>
          <option>Social</option>
          <option>Club</option>
          <option>Corporate</option>
          <option value="other">Other</option>
        </select>
        <input type="text" id="eventTypeOther" name="event_type_other"
               placeholder="Please specify event type..." style="display:none;">

        <!-- 파트 선택 -->
        <label class="field-label">What parts do you need a DJ for?</label>
        <div class="checks">
          <label><input type="checkbox" name="parts" value="Ceremony" /> Ceremony</label>
          <label><input type="checkbox" name="parts" value="Cocktail Hours" /> Cocktail Hours</label>
          <label><input type="checkbox" name="parts" value="Reception" /> Reception</label>
          <label><input type="checkbox" name="parts" value="Dance Floor" /> Dance Floor</label>
          <label><input type="checkbox" id="otherCheck" name="parts" value="Other" /> Other</label>
        </div>
        <input type="text" id="otherText" name="parts_other"
               placeholder="Please specify other parts..." style="display:none;">

        <!-- 코멘트 -->
        <textarea name="comments" placeholder="Tell me about your event or anything we should know..."></textarea>

        <button type="submit" class="btn">Send</button>
      </form>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section section-alt">
    <div class="container">
      <div class="socials">
        <a href="https://www.instagram.com/alrd1_?igsh=MTU4aXpvMXV3bXBoeg==" target="_blank" class="social"><i class="fab fa-instagram"></i></a>
        <a href="https://tiktok.com/@alrd1__" target="_blank" class="social"><i class="fab fa-tiktok"></i></a>
        <a href="mailto:alrd1team@gmail.com" target="_blank" class="social"><i class="fas fa-envelope"></i></a>
      </div>
      <h2>Thanks for choosing ALRD1!</h2>
    </div>
  </section>

  <script>
    // ======= Video autoplay hardening + lazy observe =======
    (function () {
      const vids = Array.from(document.querySelectorAll('video.auto-video'));

      function prepare(v){
        v.muted = true;
        v.setAttribute('muted','');
        v.setAttribute('playsinline','');
        v.setAttribute('webkit-playsinline','');
      }

      function tryPlay(v){
        v.play().catch(()=>{ /* ignore autoplay block */ });
      }

      // 보이는 영역에 들어오면 소스 로드(퍼포먼스 & 실패율↓)
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          const v = entry.target;
          if (entry.isIntersecting){
            // 이미 로드된 경우 skip
            if (!v.dataset.loaded){
              // data-xxx에 있는 경로를 실제 source에 주입(경로 동기화 보장)
              const mp4 = v.dataset.mp4, webm = v.dataset.webm;
              const sources = v.querySelectorAll('source');
              sources.forEach(s=>{
                if (s.type.includes('webm') && webm) s.src = webm;
                if (s.type.includes('mp4')  && mp4 ) s.src = mp4;
              });
              v.load();
              v.dataset.loaded = '1';
            }
            if (v.readyState >= 2) tryPlay(v);
            else v.addEventListener('canplay', ()=>tryPlay(v), { once:true });
            io.unobserve(v);
          }
        });
      }, { rootMargin: '200px 0px' });

      vids.forEach(v=>{ prepare(v); io.observe(v); });

      // 첫 사용자 제스처에서 전체 재시도
      const onceGesture = () => {
        vids.forEach(v=>tryPlay(v));
        window.removeEventListener('touchstart', onceGesture);
        window.removeEventListener('click', onceGesture);
      };
      window.addEventListener('touchstart', onceGesture, { passive:true });
      window.addEventListener('click', onceGesture);

      // 탭 복귀 시 재생 보정
      document.addEventListener('visibilitychange', () => {
        if (!document.hidden) vids.forEach(v=>tryPlay(v));
      });
    })();

    // ======= Mobile menu toggle =======
    const toggleBtn = document.querySelector('.menu-toggle');
    const menu = document.querySelector('.menu');
    toggleBtn.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      toggleBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });

    document.addEventListener('click', (e) => {
      if (menu.classList.contains('open') && 
          !menu.contains(e.target) && 
          !toggleBtn.contains(e.target)) {
        menu.classList.remove('open');
        toggleBtn.setAttribute('aria-expanded', 'false');
      }
    });

    // ======= Quotes form validation =======
    const eventType = document.getElementById('eventType');
    const eventTypeOther = document.getElementById('eventTypeOther');
    const otherCheck = document.getElementById('otherCheck');
    const otherText = document.getElementById('otherText');
    const quoteForm = document.querySelector('.quote-form');

    const updateEventTypeOther = () => {
      const isOther = eventType.value === 'other';
      eventTypeOther.style.display = isOther ? 'block' : 'none';
      eventTypeOther.required = isOther;
    };
    const updateOtherText = () => {
      const show = otherCheck.checked;
      otherText.style.display = show ? 'block' : 'none';
      otherText.required = show;
    };
    updateEventTypeOther();
    updateOtherText();
    eventType.addEventListener('change', updateEventTypeOther);
    otherCheck.addEventListener('change', updateOtherText);

    const showError = (el, msg) => {
      el.classList.add('field-error');
      let msgEl = el.parentElement.querySelector('.error-text');
      if(!msgEl){
        msgEl = document.createElement('div');
        msgEl.className = 'error-text';
        el.parentElement.appendChild(msgEl);
      }
      msgEl.textContent = msg;
    };
    const clearError = (el) => {
      el.classList.remove('field-error');
      const msgEl = el.parentElement.querySelector('.error-text');
      if(msgEl){ msgEl.remove(); }
    };
    quoteForm.querySelectorAll('input, select, textarea').forEach((el) => {
      el.addEventListener('input', () => clearError(el));
      el.addEventListener('change', () => clearError(el));
    });

    quoteForm.addEventListener('submit', (e) => {
      let valid = true;
      const requiredSelectors = [
        'input[name="name"]',
        'input[name="email"]',
        'input[name="phone"]',
        'input[name="location"]',
        'input[name="postal_code"]',
        'input[name="date"]',
        'select[name="start_hour"]',
        'select[name="start_minute"]',
        'select[name="start_ampm"]',
        'select[name="end_hour"]',
        'select[name="end_minute"]',
        'select[name="end_ampm"]',
        'input[name="guests"]',
        'select[name="event_type"]'
      ];
      requiredSelectors.forEach((sel) => {
        const el = quoteForm.querySelector(sel);
        if(el && !el.value){
          valid = false;
          showError(el, 'This field is required.');
        }
      });

      if(eventType.value === 'other' && !eventTypeOther.value){
        valid = false;
        showError(eventTypeOther, 'Please specify the event type.');
      }

      const checkedParts = quoteForm.querySelectorAll('input[name="parts"]:checked');
      if(checkedParts.length === 0){
        valid = false;
        const partsSection = quoteForm.querySelector('.checks');
        if(partsSection){
          let msgEl = partsSection.parentElement.querySelector('.error-text');
          if(!msgEl){
            msgEl = document.createElement('div');
            msgEl.className = 'error-text';
            partsSection.parentElement.appendChild(msgEl);
          }
          msgEl.textContent = 'Please select at least one part for DJ service.';
        }
      }

      if(otherCheck.checked && !otherText.value){
        valid = false;
        showError(otherText, 'Please specify other parts.');
      }

      if(!valid){ e.preventDefault(); }
    });
  </script>
</body>
</html>
